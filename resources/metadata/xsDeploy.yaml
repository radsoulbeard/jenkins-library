metadata:
  name: xsDeploy
  description: Performs xs deployment
  longDescription: |
    Performs xs deployment
spec:
  inputs:
    secrets:
      - name: xsDeployUserCredentialsId
        description: Jenkins username/password credential for accessing xs endpoint.
        type: jenkins
    params:
      - name: deployOpts
        type: string
        description: Additional deploy options
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: false
        default:
      - name: mtaPath
        type: string
        description: Path to deployable
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
      - name: action
        type: string
        description: The action
        default: NONE
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: false
      - name: mode
        type: string
        description: The mode
        default: DEPLOY
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
      - name: deploymentID
        type: string
        description: The deployment ID
        default:
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: false
      - name: apiUrl
        type: string
        description: The api url (e.g. https://example.org:12345
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
      - name: user
        type: string
        description: User
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
      - name: password
        type: string
        description: Password
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
      - name: org
        type: string
        description: The org
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
      - name: space
        type: string
        description: The space
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
      - name: loginOpts
        type: string
        description: Additional options for performing xs login.
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: true
      - name: xsSessionFile
        type: string
        description: The file keeping the xs session.
        scope:
        - PARAMETERS
        - STAGES
        - STEPS
        mandatory: false
  containers:
    - name: xs
      image: ppiper/xs-cli
      pullImage: false
